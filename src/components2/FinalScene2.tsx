import React, {CSSProperties} from "react";
import {AbsoluteFill, Img, interpolate, useCurrentFrame, useVideoConfig} from "remotion";
import logo2 from "../assets/logo2.png";

type FinalSceneProps = {
    username: string,
    productName: string,
    price: string,
}
export const FinalScene2: React.FC<FinalSceneProps> = ({username, productName, price}) => {
  const frame = useCurrentFrame();
  const { fps, height } = useVideoConfig();
  const getClipPath = (delay = 0) => {
      const x1 = interpolate(frame - delay, [0, fps/2], [0, 120]);
      const x2 = interpolate(frame - delay, [0, fps/2], [-20, 100]);
      return `polygon(0 0, ${x1}% 0, ${x2}% 100%, 0% 100%)`;
  }

  const top = interpolate(frame, [fps/2, fps * 2], [250, height]);

  const groupText: CSSProperties = {
      position: "absolute",
      display: "flex",
      flexDirection: "column",
      width: "100%",
      top: 300,
      gap: 50,

      textAlign: "center",
      fontFamily: "Roboto",
      fontSize: 60,
      color: "#6c55bd",
      fontWeight: "bold",
      textShadow: "rgba(0, 0, 0, 0.5) 0px 3px 10px",
  };


  return (
      <AbsoluteFill style={{ background: 'white' }}>
          <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="591" height="310"
            style={{ position: "absolute", top: -160, left: 80, transform: "scale(1.5)",
                    clipPath: getClipPath(fps/6)
          }}>
              <path d="M0 0 C0.66292053 -0.00012085 1.32584106 -0.0002417 2.0088501 -0.00036621 C54.13424356 0.13308572 98.1536466 20.62059167 142.97338867 45.24633789 C150.73663304 49.50220928 158.5920581 53.52293429 166.5625 57.375 C167.18141113 57.67744629 167.80032227 57.97989258 168.43798828 58.29150391 C184.16536483 65.95691359 200.06713355 71.33166018 217.00439453 75.70654297 C219.24860378 76.29297597 221.48228901 76.90616683 223.71484375 77.53515625 C244.14753815 83.08087207 265.61015563 84.48941011 286.70258713 84.54366493 C288.96812139 84.55100708 291.23346002 84.56679373 293.49893188 84.58500671 C299.92927457 84.63668024 306.35949289 84.68537741 312.79003906 84.70092773 C316.75516425 84.71113238 320.71976512 84.74074544 324.68468094 84.78224754 C326.17302066 84.79436588 327.6614349 84.79971488 329.14982224 84.79744911 C341.43570136 84.78333827 356.42031578 85.27915006 366.0859375 93.81640625 C372.09384622 100.15808768 373.60090231 106.85819293 373.8125 115.375 C373.48512624 126.0801221 369.54450706 134.16471312 364.57666016 143.47363281 C363.71654142 145.08620015 362.87741905 146.70993923 362.04296875 148.3359375 C353.8472795 163.4298454 342.13907892 176.92819123 330.89111328 189.84033203 C329.48521532 191.46427076 328.09860309 193.10325949 326.71484375 194.74609375 C320.29651538 202.34570955 313.63386459 209.67079981 306.80859375 216.90625 C304.12187003 219.75968241 301.51852704 222.67525481 298.9375 225.625 C293.86337112 231.30274272 288.23659199 236.31184659 282.5625 241.375 C281.80066406 242.07496094 281.03882813 242.77492187 280.25390625 243.49609375 C247.38153401 273.47328458 209.69362079 291.29891858 164.77490234 289.57763672 C158.29309657 289.16876768 152.59066219 287.86965563 146.5625 285.375 C145.60029541 284.98030518 145.60029541 284.98030518 144.61865234 284.57763672 C134.81394224 280.43984767 126.885585 274.99936716 119.10058594 267.79394531 C117.57807934 266.38937256 116.03195051 265.01642937 114.4765625 263.6484375 C108.91454781 258.71460748 103.75328787 253.52909475 98.77685547 248.00292969 C90.03244609 238.31191221 80.84167405 229.43737415 70.5625 221.375 C69.52933009 220.51923974 68.49815799 219.66106311 67.46875 218.80078125 C45.12811475 200.34981017 18.47889848 188.49159531 -8.77612305 179.27709961 C-10.41285689 178.72231275 -12.04562865 178.15545153 -13.67114258 177.56860352 C-20.42837429 175.17313338 -27.36173726 173.75348042 -34.375 172.3125 C-35.56673828 172.05662109 -36.75847656 171.80074219 -37.98632812 171.53710938 C-57.58590362 167.4751835 -77.19508557 166.87223537 -97.15332031 166.27050781 C-139.66069481 164.95832888 -139.66069481 164.95832888 -149.5 154.625 C-156.88856394 145.97680811 -156.3993509 133.7398984 -155.72607422 123.06445312 C-153.78011489 104.92850729 -142.46637608 87.36886925 -131.4375 73.375 C-130.81488281 72.56160156 -130.19226563 71.74820313 -129.55078125 70.91015625 C-124.21329412 64.05695269 -118.3882481 57.69318887 -112.4375 51.375 C-111.8084375 50.70339844 -111.179375 50.03179687 -110.53125 49.33984375 C-105.88566735 44.52991266 -100.74226225 40.43367716 -95.4375 36.375 C-94.89593262 35.95702148 -94.35436523 35.53904297 -93.79638672 35.10839844 C-66.32268634 14.00328553 -35.10790337 -0.04472914 0 0 Z "
                    fill="#726ac6" transform="translate(171.4375,7.625)"/>
          </svg>
          <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="591" height="310"
            style={{ position: "absolute", top: -210, left: 80, transform: "scale(1.5)",
                clipPath: getClipPath()
          }}>
              <path d="M0 0 C0.66292053 -0.00012085 1.32584106 -0.0002417 2.0088501 -0.00036621 C54.13424356 0.13308572 98.1536466 20.62059167 142.97338867 45.24633789 C150.73663304 49.50220928 158.5920581 53.52293429 166.5625 57.375 C167.18141113 57.67744629 167.80032227 57.97989258 168.43798828 58.29150391 C184.16536483 65.95691359 200.06713355 71.33166018 217.00439453 75.70654297 C219.24860378 76.29297597 221.48228901 76.90616683 223.71484375 77.53515625 C244.14753815 83.08087207 265.61015563 84.48941011 286.70258713 84.54366493 C288.96812139 84.55100708 291.23346002 84.56679373 293.49893188 84.58500671 C299.92927457 84.63668024 306.35949289 84.68537741 312.79003906 84.70092773 C316.75516425 84.71113238 320.71976512 84.74074544 324.68468094 84.78224754 C326.17302066 84.79436588 327.6614349 84.79971488 329.14982224 84.79744911 C341.43570136 84.78333827 356.42031578 85.27915006 366.0859375 93.81640625 C372.09384622 100.15808768 373.60090231 106.85819293 373.8125 115.375 C373.48512624 126.0801221 369.54450706 134.16471312 364.57666016 143.47363281 C363.71654142 145.08620015 362.87741905 146.70993923 362.04296875 148.3359375 C353.8472795 163.4298454 342.13907892 176.92819123 330.89111328 189.84033203 C329.48521532 191.46427076 328.09860309 193.10325949 326.71484375 194.74609375 C320.29651538 202.34570955 313.63386459 209.67079981 306.80859375 216.90625 C304.12187003 219.75968241 301.51852704 222.67525481 298.9375 225.625 C293.86337112 231.30274272 288.23659199 236.31184659 282.5625 241.375 C281.80066406 242.07496094 281.03882813 242.77492187 280.25390625 243.49609375 C247.38153401 273.47328458 209.69362079 291.29891858 164.77490234 289.57763672 C158.29309657 289.16876768 152.59066219 287.86965563 146.5625 285.375 C145.60029541 284.98030518 145.60029541 284.98030518 144.61865234 284.57763672 C134.81394224 280.43984767 126.885585 274.99936716 119.10058594 267.79394531 C117.57807934 266.38937256 116.03195051 265.01642937 114.4765625 263.6484375 C108.91454781 258.71460748 103.75328787 253.52909475 98.77685547 248.00292969 C90.03244609 238.31191221 80.84167405 229.43737415 70.5625 221.375 C69.52933009 220.51923974 68.49815799 219.66106311 67.46875 218.80078125 C45.12811475 200.34981017 18.47889848 188.49159531 -8.77612305 179.27709961 C-10.41285689 178.72231275 -12.04562865 178.15545153 -13.67114258 177.56860352 C-20.42837429 175.17313338 -27.36173726 173.75348042 -34.375 172.3125 C-35.56673828 172.05662109 -36.75847656 171.80074219 -37.98632812 171.53710938 C-57.58590362 167.4751835 -77.19508557 166.87223537 -97.15332031 166.27050781 C-139.66069481 164.95832888 -139.66069481 164.95832888 -149.5 154.625 C-156.88856394 145.97680811 -156.3993509 133.7398984 -155.72607422 123.06445312 C-153.78011489 104.92850729 -142.46637608 87.36886925 -131.4375 73.375 C-130.81488281 72.56160156 -130.19226563 71.74820313 -129.55078125 70.91015625 C-124.21329412 64.05695269 -118.3882481 57.69318887 -112.4375 51.375 C-111.8084375 50.70339844 -111.179375 50.03179687 -110.53125 49.33984375 C-105.88566735 44.52991266 -100.74226225 40.43367716 -95.4375 36.375 C-94.89593262 35.95702148 -94.35436523 35.53904297 -93.79638672 35.10839844 C-66.32268634 14.00328553 -35.10790337 -0.04472914 0 0 Z "
                    fill="#6c55bd" transform="translate(171.4375,7.625)"/>
          </svg>

          <Img src={logo2} style={{ position: "absolute", top: 50, right: 50, width: 120,
              clipPath: getClipPath(fps/4) }}
          />

          <div style={{ ...groupText }}>
              <div style={{ fontWeight: "900", }}>
                  {username}
              </div>

              <div style={{ fontSize: 40, }}>
                  {productName}
              </div>

              <div>{price}</div>

              <div style={{ display: "flex", flexDirection: "column", gap: 20, fontSize: 28, textShadow: "none", fontWeight: 400 }}>
                  <div>Disponible en</div>
                  <div>
                      lolapay.com/<strong>{username}</strong>
                  </div>
              </div>
          </div>

          {/* Just for animation */}
          <AbsoluteFill style={{ top }} >
              <div style={{ width: "100%", height: 50, background: "linear-gradient(transparent, white)" }}></div>
              <div style={{ width: "100%", height: "100%", background: "white" }}></div>
          </AbsoluteFill>

      </AbsoluteFill>);
};
